<section class="container p-4 mt-5">
    <h2 class="text-center">Nuevo Ticket</h2>
    <form [formGroup]="newTicketForm" (submit)="createTicket()">

        <div class="form-group mb-3">
          <label for="dni">DNI</label>
          <input type="text" class="form-control" id="dni" required formControlName="dni">
        </div>
        @if (dni?.invalid && (dni?.dirty || dni?.touched)) {
            <div class="alert alert-danger" role="alert">
                    Debe ingresar un DNI
            </div>
        }
        
        <div class="form-group mb-3">
          <label for="espectador">Tipo de Espectador</label>
          <select class="form-control" id="espectador" (change)="calcularDescuento()" required formControlName="tipoEspectador">
            <option value="local">Local</option>
            <option value="extranjero">Extranjero</option>
          </select>
          @if (mostrarSmall) {
            <small>Por favor, elija el tipo de espectador</small>
          }
        </div>
        @if (tipoEspectador?.invalid && (tipoEspectador?.dirty || tipoEspectador?.touched)) {
            <div class="alert alert-danger" role="alert">
                    Debe elegir el tipo de espectador
            </div>
        }

        <div class="form-group mb-3">
            <label for="fecha">Fecha de Cobro</label>
            <input id="date" type="date" class="form-control" id="fecha" required  formControlName="fechaCobro">
        </div>
        @if (fechaCobro?.invalid && (fechaCobro?.dirty || fechaCobro?.touched)) {
            <div class="alert alert-danger" role="alert">
                    Debe ingresar una fecha
            </div>
        }

        <div class="form-group mb-3">
            <label for="precio">Precio</label>
            <input type="number" class="form-control" id="precio" min="1" (change)="calcularDescuento()" required  formControlName="precioReal">
        </div>
        @if (precioReal?.invalid && (precioReal?.dirty || precioReal?.touched)) {
            <div class="alert alert-danger" role="alert">
                    Debe ingresar el precio
            </div>
        }

        @if (mostrarLabel) {
            <div>
                <label class="form-label">
                    <h2>Precio total: {{precioCobrado}}</h2>
                </label>
            </div>
        }

        <div class="d-flex justify-content-between">
            <button type="submit" class="btn btn-primary" [disabled]="newTicketForm.invalid">Registrar</button>
            <button type="reset" class="btn btn-warning">Vaciar campos</button>
            <button type="button" class="btn btn-secondary" (click)="volver()">Cancelar</button>
        </div>
        
    </form>
</section>
